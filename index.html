<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>AI Story Generator</title>
    <style>
        * {
            margin: 0;
            padding: 0;
            box-sizing: border-box;
        }

        body {
            font-family: 'Segoe UI', Tahoma, Geneva, Verdana, sans-serif;
            background: linear-gradient(135deg, #667eea 0%, #764ba2 100%);
            min-height: 100vh;
            padding: 20px;
        }

        .container {
            max-width: 900px;
            margin: 0 auto;
            background: white;
            border-radius: 20px;
            padding: 30px;
            box-shadow: 0 20px 40px rgba(0,0,0,0.1);
        }

        .header {
            text-align: center;
            margin-bottom: 30px;
        }

        .header h1 {
            color: #4a5568;
            font-size: 2.5rem;
            margin-bottom: 10px;
            background: linear-gradient(45deg, #667eea, #764ba2);
            -webkit-background-clip: text;
            -webkit-text-fill-color: transparent;
            background-clip: text;
        }

        .header p {
            color: #718096;
            font-size: 1.1rem;
        }

        .setup-section {
            background: #fff5f5;
            border: 2px solid #feb2b2;
            border-radius: 12px;
            padding: 20px;
            margin-bottom: 25px;
        }

        .setup-section h3 {
            color: #c53030;
            margin-bottom: 10px;
        }

        .setup-section p {
            color: #744444;
            margin-bottom: 15px;
        }

        .api-input {
            width: 100%;
            padding: 10px;
            border: 1px solid #fed7d7;
            border-radius: 8px;
            margin-bottom: 10px;
        }

        .input-group {
            margin-bottom: 25px;
        }

        .input-group label {
            display: block;
            margin-bottom: 8px;
            color: #4a5568;
            font-weight: 600;
            font-size: 1.1rem;
        }

        .hints-input {
            width: 100%;
            padding: 15px;
            border: 2px solid #e2e8f0;
            border-radius: 12px;
            font-size: 1rem;
            transition: all 0.3s ease;
            resize: vertical;
            min-height: 120px;
        }

        .hints-input:focus {
            outline: none;
            border-color: #667eea;
            box-shadow: 0 0 0 3px rgba(102, 126, 234, 0.1);
        }

        .row {
            display: flex;
            gap: 20px;
            margin-bottom: 25px;
        }

        .col {
            flex: 1;
        }

        .age-input, .length-select {
            width: 100%;
            padding: 12px;
            border: 2px solid #e2e8f0;
            border-radius: 12px;
            font-size: 1rem;
            transition: all 0.3s ease;
        }

        .age-input:focus, .length-select:focus {
            outline: none;
            border-color: #667eea;
            box-shadow: 0 0 0 3px rgba(102, 126, 234, 0.1);
        }

        .generate-btn {
            width: 100%;
            padding: 15px;
            background: linear-gradient(45deg, #667eea, #764ba2);
            color: white;
            border: none;
            border-radius: 12px;
            font-size: 1.2rem;
            font-weight: 600;
            cursor: pointer;
            transition: all 0.3s ease;
            margin-bottom: 30px;
        }

        .generate-btn:hover {
            transform: translateY(-2px);
            box-shadow: 0 10px 20px rgba(102, 126, 234, 0.3);
        }

        .generate-btn:disabled {
            opacity: 0.6;
            cursor: not-allowed;
            transform: none;
        }

        .story-output {
            background: #f7fafc;
            border: 2px solid #e2e8f0;
            border-radius: 12px;
            padding: 25px;
            min-height: 300px;
            font-size: 1.1rem;
            line-height: 1.8;
            color: #4a5568;
            white-space: pre-wrap;
            margin-bottom: 20px;
            display: none;
        }

        .story-output.show {
            display: block;
        }

        .loading {
            text-align: center;
            color: #667eea;
            font-style: italic;
            font-size: 1.1rem;
        }

        .copy-btn, .regenerate-btn {
            background: #48bb78;
            color: white;
            border: none;
            padding: 12px 20px;
            border-radius: 8px;
            cursor: pointer;
            font-weight: 600;
            transition: all 0.3s ease;
            margin-right: 10px;
            margin-bottom: 10px;
        }

        .regenerate-btn {
            background: #ed8936;
        }

        .copy-btn:hover {
            background: #38a169;
        }

        .regenerate-btn:hover {
            background: #dd6b20;
        }

        .example {
            background: #edf2f7;
            padding: 15px;
            border-radius: 8px;
            margin-bottom: 20px;
            font-size: 0.9rem;
            color: #4a5568;
        }

        .example strong {
            color: #667eea;
        }

        .thinking-display {
            background: #f0fff4;
            border: 1px solid #9ae6b4;
            border-radius: 8px;
            padding: 15px;
            margin-bottom: 15px;
            font-size: 0.9rem;
            color: #2d5016;
            display: none;
        }

        .thinking-display.show {
            display: block;
        }

        .cost-info {
            font-size: 0.8rem;
            color: #666;
            text-align: center;
            margin-bottom: 15px;
        }

        @media (max-width: 600px) {
            .row {
                flex-direction: column;
            }
            
            .container {
                padding: 20px;
            }
            
            .header h1 {
                font-size: 2rem;
            }
        }
    </style>
</head>
<body>
    <div class="container">
        <div class="header">
            <h1>üß† AI Story Generator</h1>
            <p>Create intelligent, lengthy stories with real AI understanding!</p>
        </div>

        <div class="setup-section" id="setupSection">
            <h3>‚öôÔ∏è AI Setup (Optional)</h3>
            <p>For advanced AI features, you can add an OpenAI API key. Or use the FREE Demo Mode below!</p>
            <input type="password" id="apiKey" class="api-input" placeholder="Enter your OpenAI API key (sk-...) - Optional">
            <p><small>Get your key from <a href="https://platform.openai.com/api-keys" target="_blank">platform.openai.com</a> - Cost: ~$0.01-0.03 per story</small></p>
            <div style="margin-top: 15px;">
                <button onclick="saveApiKey()" style="background: #48bb78; color: white; border: none; padding: 8px 16px; border-radius: 6px; cursor: pointer; margin-right: 10px;">Save API Key</button>
                <button id="demoBtn" onclick="enableDemoMode()" style="background: #805ad5; color: white; border: none; padding: 8px 16px; border-radius: 6px; cursor: pointer;">üé¨ Use FREE Demo Mode</button>
            </div>
        </div>

        <div class="example">
            <strong>Advanced Examples:</strong><br>
            ‚Ä¢ "Sprunki cartoon characters, musical competition, teamwork lesson" - AI will research Sprunki characters!<br>
            ‚Ä¢ "Bluey characters, lost toy, problem solving, empathy" - Uses real character names and personalities<br>
            ‚Ä¢ "Marvel superheroes, environmental crisis, responsibility" - Incorporates actual superhero traits
        </div>

        <div class="input-group">
            <label for="hints">Story Elements (characters, shows, themes, problems):</label>
            <textarea 
                id="hints" 
                class="hints-input" 
                placeholder="Enter any combination: characters (real or fictional), shows/cartoons, themes, objects, problems to solve...
                
Examples:
- Sprunki characters, music contest, friendship
- Paw Patrol dogs, environmental cleanup, teamwork
- Harry Potter characters, time management, school stress
- Among Us crewmates, communication problems, trust"
            ></textarea>
        </div>

        <div class="row">
            <div class="col">
                <div class="input-group">
                    <label for="age">Child's Age:</label>
                    <input type="number" id="age" class="age-input" min="1" max="18" value="7" placeholder="Age">
                </div>
            </div>
            <div class="col">
                <div class="input-group">
                    <label for="storyFocus">Story Focus:</label>
                    <select id="storyFocus" class="length-select">
                        <option value="adventure">Adventure & Problem Solving</option>
                        <option value="friendship">Friendship & Social Skills</option>
                        <option value="learning">Learning & Education</option>
                        <option value="emotional">Emotional Intelligence</option>
                        <option value="creativity">Creativity & Imagination</option>
                        <option value="responsibility">Responsibility & Growing Up</option>
                    </select>
                </div>
            </div>
        </div>

        <div class="cost-info">
            Demo Mode: FREE Forever ‚Ä¢ AI Mode: $0.01-0.03 per story ‚Ä¢ Length: 800-1500 words
        </div>

        <button id="generateBtn" class="generate-btn" onclick="generateStory()">üß† Generate AI Story</button>

        <div id="thinkingDisplay" class="thinking-display">
            <strong>ü§î AI Thinking Process:</strong>
            <div id="thinkingContent"></div>
        </div>

        <div id="storyOutput" class="story-output"></div>

        <div id="actionButtons" style="display: none;">
            <button id="copyBtn" class="copy-btn" onclick="copyStory()">üìã Copy Story</button>
            <button id="regenerateBtn" class="regenerate-btn" onclick="regenerateStory()">üîÑ Generate Another Version</button>
        </div>
    </div>

    <script>
        let currentApiKey = '';
        let currentStory = '';
        let currentPrompt = '';

        function saveApiKey() {
            const apiKey = document.getElementById('apiKey').value.trim();
            if (apiKey.startsWith('sk-')) {
                currentApiKey = apiKey;
                document.getElementById('setupSection').style.display = 'none';
                alert('API key saved! You can now generate intelligent stories.');
            } else {
                alert('Please enter a valid OpenAI API key (starts with sk-)');
            }
        }

        function enableDemoMode() {
            document.getElementById('setupSection').style.display = 'none';
            currentApiKey = 'demo';
            alert('üé¨ Demo mode activated! You can now generate FREE unlimited varied stories!');
        }

        async function generateStory() {
            const hints = document.getElementById('hints').value.trim();
            const age = parseInt(document.getElementById('age').value);
            const storyFocus = document.getElementById('storyFocus').value;

            if (!hints) {
                alert('Please enter some story elements!');
                return;
            }

            if (!currentApiKey) {
                // Automatically enable demo mode if no API key is set
                enableDemoMode();
            }

            // Show loading state
            const generateBtn = document.getElementById('generateBtn');
            const storyOutput = document.getElementById('storyOutput');
            const thinkingDisplay = document.getElementById('thinkingDisplay');
            const thinkingContent = document.getElementById('thinkingContent');
            
            generateBtn.disabled = true;
            generateBtn.textContent = 'üß† AI is thinking...';
            storyOutput.classList.add('show');
            storyOutput.innerHTML = '<div class="loading">‚ú® AI is analyzing your elements and crafting a unique story...</div>';
            thinkingDisplay.classList.add('show');
            thinkingContent.innerHTML = 'Analyzing story elements...';

            try {
                const story = await callOpenAI(hints, age, storyFocus, thinkingContent);
                displayStory(story);
            } catch (error) {
                console.error('Error:', error);
                storyOutput.innerHTML = `<div style="color: red;">Error generating story: ${error.message}</div>`;
            }

            generateBtn.disabled = false;
            generateBtn.textContent = 'üß† Generate AI Story';
        }

        async function callOpenAI(hints, age, storyFocus, thinkingContent) {
            if (currentApiKey === 'demo') {
                thinkingContent.innerHTML = 'Demo mode: Simulating AI analysis...';
                await new Promise(resolve => setTimeout(resolve, 2000));
                thinkingContent.innerHTML = 'Demo: Creating story with character recognition...';
                await new Promise(resolve => setTimeout(resolve, 1000));
                return createDemoStory(hints, age, storyFocus);
            }

            thinkingContent.innerHTML = 'Building comprehensive story prompt...';
            
            // Create a sophisticated prompt that handles character recognition and meaningful integration
            const systemPrompt = `You are an expert children's story writer with deep knowledge of popular culture, cartoons, games, and characters. Your task is to create engaging, lengthy stories (800-1500 words) that meaningfully incorporate ALL provided elements.

CRITICAL REQUIREMENTS:
1. RESEARCH MODE: When given character/show names (like "Sprunki characters", "Bluey characters", "Paw Patrol dogs"), you must use your knowledge to include ACTUAL character names, personalities, and traits from those properties.

2. MEANINGFUL INTEGRATION: Every single element provided must be woven meaningfully into the story - not just mentioned, but integral to the plot.

3. CORE PROBLEM: Every story must have a central problem/challenge that teaches a valuable lesson appropriate for the age.

4. LENGTH: Create substantial stories (800-1500 words) with rich descriptions, dialogue, and character development.

5. AGE APPROPRIATENESS: Adjust vocabulary, complexity, and themes for age ${age}.

STORY FOCUS: ${storyFocus}

Please think through your approach and show your reasoning process.`;

            const userPrompt = `Create a lengthy, engaging story incorporating ALL of these elements: ${hints}

Child's age: ${age}
Story focus: ${storyFocus}

INSTRUCTIONS:
1. First, identify any recognizable characters/properties and their traits
2. Design a central problem that requires solving
3. Weave ALL elements meaningfully into the narrative
4. Include dialogue, rich descriptions, and character development
5. Ensure the story teaches a valuable lesson
6. Make it entertaining and age-appropriate

Show your thinking process, then provide the complete story.`;

            thinkingContent.innerHTML = 'Sending request to AI...';

            const response = await fetch('https://api.openai.com/v1/chat/completions', {
                method: 'POST',
                headers: {
                    'Authorization': `Bearer ${currentApiKey}`,
                    'Content-Type': 'application/json',
                },
                body: JSON.stringify({
                    model: 'gpt-4',
                    messages: [
                        { role: 'system', content: systemPrompt },
                        { role: 'user', content: userPrompt }
                    ],
                    max_tokens: 2000,
                    temperature: 0.8,
                })
            });

            if (!response.ok) {
                throw new Error(`API Error: ${response.status} - ${response.statusText}`);
            }

            thinkingContent.innerHTML = 'Processing AI response...';
            const data = await response.json();
            
            thinkingContent.innerHTML = 'Story generated successfully! ‚úÖ';
            setTimeout(() => {
                document.getElementById('thinkingDisplay').classList.remove('show');
            }, 3000);

            return data.choices[0].message.content;
        }

        function displayStory(story) {
            currentStory = story;
            document.getElementById('storyOutput').innerHTML = story;
            document.getElementById('actionButtons').style.display = 'block';
        }

        function copyStory() {
            navigator.clipboard.writeText(currentStory).then(() => {
                const copyBtn = document.getElementById('copyBtn');
                copyBtn.textContent = '‚úÖ Copied!';
                setTimeout(() => {
                    copyBtn.textContent = 'üìã Copy Story';
                }, 2000);
            });
        }

        function regenerateStory() {
            document.getElementById('generateBtn').click();
        }

        // Enhanced demo story generator for testing with variations
        function createDemoStory(hints, age, focus) {
            const elements = hints.split(',').map(h => h.trim());
            const storyVariation = Math.floor(Math.random() * 3) + 1; // 1, 2, or 3
            
            let story = generateStoryOpening(hints, elements, storyVariation);
            
            // Add substantial content based on age and focus
            if (age <= 5) {
                story += generateYoungStory(elements, focus, storyVariation);
            } else if (age <= 10) {
                story += generateMiddleStory(elements, focus, storyVariation);
            } else {
                story += generateOlderStory(elements, focus, storyVariation);
            }

            return story;
        }

        function generateStoryOpening(hints, elements, variation) {
            let opening = '';
            
            // Character-specific openings
            if (hints.toLowerCase().includes('sprunki')) {
                const spunkiOpenings = [
                    `In the vibrant musical realm of Sprunki, where every sound creates magic, Oren and Simon discovered their harmonies were creating unexpected effects...`,
                    `The Sprunki music festival was approaching, but something strange was happening to the musical creatures' abilities...`,
                    `Deep in the Sprunki forest, where melodies grow on trees, the usually cheerful singing had turned into worried whispers...`
                ];
                opening = spunkiOpenings[variation - 1] + '\n\n';
            } else if (hints.toLowerCase().includes('bluey')) {
                const blueyOpenings = [
                    `It was a perfectly ordinary morning in Brisbane until Bluey discovered something extraordinary in the backyard...`,
                    `Bluey and Bingo were playing their favorite game when they stumbled upon a mystery that would require all of their creativity to solve...`,
                    `When Dad announced a special family challenge, Bluey knew this would be no ordinary weekend adventure...`
                ];
                opening = blueyOpenings[variation - 1] + '\n\n';
            } else if (hints.toLowerCase().includes('paw patrol')) {
                const pawPatrolOpenings = [
                    `Adventure Bay was buzzing with excitement until Ryder received an unusual emergency call that would test the Paw Patrol's teamwork like never before...`,
                    `Marshall, Chase, and the team were training for their annual rescue skills competition when they discovered something that changed everything...`,
                    `A mysterious problem had appeared in Adventure Bay, and it would take every pup's special skills to figure out what was happening...`
                ];
                opening = pawPatrolOpenings[variation - 1] + '\n\n';
            } else {
                // Generic openings based on first element
                const genericOpenings = [
                    `In a world where ${elements[0] || 'extraordinary beings'} lived, an unexpected discovery would change everything they thought they knew...`,
                    `The day started like any other, but ${elements[0] || 'our heroes'} were about to face a challenge that would test their courage and friendship...`,
                    `Nobody could have predicted what would happen when ${elements[0] || 'the main character'} decided to explore beyond the familiar boundaries...`
                ];
                opening = genericOpenings[variation - 1] + '\n\n';
            }
            
            return `# ${generateRandomTitle(elements, variation)}\n\n${opening}`;
        }

        function generateRandomTitle(elements, variation) {
            const titleTemplates = [
                `The Mystery of ${elements[1] || 'the Missing Element'}`,
                `${elements[0] || 'Heroes'} and the Great Challenge`,
                `The Adventure of ${elements[2] || 'Discovery'} and Friendship`,
                `Quest for the ${elements[1] || 'Lost Treasure'}`,
                `The Day ${elements[0] || 'Everything'} Changed Forever`
            ];
            return titleTemplates[(variation - 1) + Math.floor(Math.random() * 2)];
        }

        function generateYoungStory(elements, focus, variation) {
            const storyVersions = {
                adventure: [
                    `The brave ${elements[0]} decided to go on a big adventure! They packed their favorite snacks and set off to find ${elements[1] || 'something special'}.\n\nOn the way, they met a friendly helper who said, "I know where to find what you're looking for, but we need to work together!"\n\nThey climbed over soft hills and crossed babbling brooks. When they finally found ${elements[2] || 'the treasure'}, they learned that sharing the discovery made it even more special.\n\n"The best adventures," said their new friend, "happen when we help each other!" And they all lived happily ever after.`,
                    
                    `Once upon a time, ${elements[0]} woke up to find that ${elements[1] || 'something important'} was missing! "Oh no!" they said, "How will we solve this?"\n\nA wise old ${elements[2] || 'owl'} appeared and said, "Don't worry! Every problem has a solution if you think hard and ask for help."\n\nTogether, they searched high and low. They looked in the clouds and under the flowers. Finally, they found what they were looking for in the most unexpected place!\n\n"You see," smiled the ${elements[2] || 'owl'}, "good things come to those who never give up and are kind to others."`,
                    
                    `${elements[0]} loved to play, but today was different. Today, they noticed that ${elements[1] || 'their friend'} looked sad.\n\n"What's wrong?" asked ${elements[0]} kindly.\n\n"I lost my ${elements[2] || 'favorite toy'}," said their friend. "Now I can't play anymore."\n\n${elements[0]} had an idea! "Let's look for it together! And while we search, we can play games to keep our spirits up!"\n\nThey played hide-and-seek with butterflies, had races with rabbits, and sang songs with the birds. And guess what? While they were having fun, they found the lost ${elements[2] || 'toy'}!\n\n"Thank you for helping me and making me smile again," said their friend. And they played together happily ever after.`
                ],
                
                friendship: [
                    `${elements[0]} had many friends, but today felt different. ${elements[1] || 'Someone new'} had arrived, and they looked a little scared and lonely.\n\n"Hello!" said ${elements[0]} with a big, warm smile. "Would you like to play with us?"\n\nAt first, ${elements[1] || 'the new friend'} was shy. But ${elements[0]} was patient and kind. They showed ${elements[1]} all their favorite games and shared their ${elements[2] || 'special snacks'}.\n\nSoon, everyone was laughing and playing together. "I was worried nobody would like me," said ${elements[1]}.\n\n"We like you just the way you are!" said ${elements[0]}. And from that day on, they were the best of friends.`,
                    
                    `When ${elements[0]} and ${elements[1] || 'their best friend'} both wanted to play with the same ${elements[2] || 'toy'}, they didn't know what to do.\n\n"I want to play with it!" said ${elements[0]}.\n"But I want to play with it too!" said ${elements[1]}.\n\nThey sat quietly for a moment, thinking. Then ${elements[0]} had a wonderful idea!\n\n"What if we take turns? You can play for five minutes, then I'll play for five minutes!"\n\n${elements[1]} smiled. "That's a great idea! And maybe we can even play together!"\n\nAnd that's exactly what they did. They learned that sharing made playing even more fun!`,
                    
                    `${elements[0]} was feeling grumpy. Nothing seemed to be going right today. First, it rained during playtime. Then, their ${elements[2] || 'favorite food'} wasn't ready for lunch.\n\nBut then ${elements[1] || 'a caring friend'} came over with a big hug and said, "Sometimes days are hard, but friends can make them better!"\n\nTogether, they made up silly dances for the rainy day. They drew colorful pictures and told funny jokes. Soon, ${elements[0]} was giggling and smiling again.\n\n"Thank you for being such a good friend," said ${elements[0]}. "You made my whole day brighter!" And they spent the rest of the day spreading joy to everyone they met.`
                ]
            };

            const focusStories = storyVersions[focus] || storyVersions.adventure;
            return focusStories[variation - 1] || focusStories[0];
        }

        function generateMiddleStory(elements, focus, variation) {
            const problemTypes = [
                `The ${elements[1] || 'community center'} that everyone loved was facing a serious problem`,
                `A mysterious change had occurred with ${elements[1] || 'the school playground'}`,
                `The annual ${elements[1] || 'friendship festival'} was in jeopardy`
            ];

            const solutions = [
                `By combining everyone's unique talents and perspectives`,
                `Through careful research and creative problem-solving`,
                `With determination, teamwork, and innovative thinking`
            ];

            const problemType = problemTypes[variation - 1];
            const solutionType = solutions[variation - 1];

            let story = `${elements[0]} and their group of friends discovered that ${problemType}. The issue was more complicated than anyone had first realized, and it would affect everyone in their community.\n\n`;

            if (focus === 'learning') {
                story += `"We need to understand exactly what's happening before we can fix it," said ${elements[0]}. They decided to research the problem by talking to experts, reading books, and conducting careful observations.\n\n`;
                story += `Through their investigation, they learned that ${elements[2] || 'the situation'} was connected to something they hadn't considered before. The real challenge wasn't just solving the immediate problem, but understanding the underlying causes.\n\n`;
                story += `${solutionType}, they developed a comprehensive plan that not only addressed the current issue but also prevented similar problems in the future.\n\n`;
            } else if (focus === 'friendship') {
                story += `The problem was causing tension between different groups in the community. Some people blamed others, and friendships were being strained.\n\n`;
                story += `"This isn't about who's right or wrong," realized ${elements[0]}. "This is about bringing everyone together to find a solution that works for everyone."\n\n`;
                story += `They organized community meetings where everyone could share their concerns and ideas. By listening carefully and showing empathy for different perspectives, they helped people understand each other better.\n\n`;
                story += `${solutionType}, they not only solved the original problem but also strengthened the bonds between community members.\n\n`;
            }

            story += `The experience taught everyone valuable lessons about cooperation, perseverance, and the importance of working together to overcome challenges. What started as a problem became an opportunity for growth and stronger relationships.`;

            return story;
        }

        function generateOlderStory(elements, focus, variation) {
            const complexityLevels = [
                `a multifaceted challenge that required balancing competing interests`,
                `an ethical dilemma where there was no clearly right or wrong answer`,
                `a systemic issue that had been building up over time`
            ];

            const complexity = complexityLevels[variation - 1];

            let story = `What began as a straightforward situation involving ${elements[0]} quickly evolved into ${complexity}. The implications extended far beyond what anyone had initially anticipated.\n\n`;

            story += `The core issue centered around ${elements[1] || 'a crucial decision'} that would have lasting consequences for everyone involved. ${elements[0]} found themselves in a position of leadership, responsible not just for their own choices but for guiding others through a complex situation.\n\n`;

            if (focus === 'responsibility') {
                story += `"With great power comes great responsibility," ${elements[0]} reflected. They realized that their actions would set a precedent for how similar situations might be handled in the future.\n\n`;
                story += `The decision-making process involved extensive consultation with stakeholders, careful consideration of potential outcomes, and a commitment to transparency throughout the process.\n\n`;
            } else if (focus === 'emotional') {
                story += `The emotional toll of the situation was significant. People were feeling frustrated, anxious, and uncertain about the future. ${elements[0]} recognized that addressing these emotional needs was just as important as solving the practical problems.\n\n`;
                story += `Through empathetic listening, honest communication, and a genuine commitment to understanding everyone's concerns, they helped create an environment where people felt heard and valued.\n\n`;
            }

            story += `The resolution didn't come easily or quickly. It required sustained effort, compromise, and a willingness to adapt as new information emerged. However, the process itself became a valuable learning experience for everyone involved.\n\n`;

            story += `In the end, they discovered that the most important outcomes weren't just the practical solutions they implemented, but the stronger relationships, improved communication systems, and greater sense of community resilience they had built together.\n\n`;

            story += `The experience demonstrated that complex challenges often have hidden opportunities for growth, innovation, and positive change when approached with patience, wisdom, and collaborative spirit.`;

            return story;
        }
    </script>
</body>
</html>