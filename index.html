<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>AI Story Generator</title>
    <style>
        * {
            margin: 0;
            padding: 0;
            box-sizing: border-box;
        }

        body {
            font-family: 'Segoe UI', Tahoma, Geneva, Verdana, sans-serif;
            background: linear-gradient(135deg, #667eea 0%, #764ba2 100%);
            min-height: 100vh;
            padding: 20px;
        }

        .container {
            max-width: 900px;
            margin: 0 auto;
            background: white;
            border-radius: 20px;
            padding: 30px;
            box-shadow: 0 20px 40px rgba(0,0,0,0.1);
        }

        .header {
            text-align: center;
            margin-bottom: 30px;
        }

        .header h1 {
            color: #4a5568;
            font-size: 2.5rem;
            margin-bottom: 10px;
            background: linear-gradient(45deg, #667eea, #764ba2);
            -webkit-background-clip: text;
            -webkit-text-fill-color: transparent;
            background-clip: text;
        }

        .header p {
            color: #718096;
            font-size: 1.1rem;
        }

        .setup-section {
            background: #fff5f5;
            border: 2px solid #feb2b2;
            border-radius: 12px;
            padding: 20px;
            margin-bottom: 25px;
        }

        .setup-section h3 {
            color: #c53030;
            margin-bottom: 10px;
        }

        .setup-section p {
            color: #744444;
            margin-bottom: 15px;
        }

        .input-group {
            margin-bottom: 25px;
        }

        .input-group label {
            display: block;
            margin-bottom: 8px;
            color: #4a5568;
            font-weight: 600;
            font-size: 1.1rem;
        }

        .hints-input {
            width: 100%;
            padding: 15px;
            border: 2px solid #e2e8f0;
            border-radius: 12px;
            font-size: 1rem;
            transition: all 0.3s ease;
            resize: vertical;
            min-height: 120px;
        }

        .hints-input:focus {
            outline: none;
            border-color: #667eea;
            box-shadow: 0 0 0 3px rgba(102, 126, 234, 0.1);
        }

        .row {
            display: flex;
            gap: 20px;
            margin-bottom: 25px;
        }

        .col {
            flex: 1;
        }

        .age-input, .length-select {
            width: 100%;
            padding: 12px;
            border: 2px solid #e2e8f0;
            border-radius: 12px;
            font-size: 1rem;
            transition: all 0.3s ease;
        }

        .age-input:focus, .length-select:focus {
            outline: none;
            border-color: #667eea;
            box-shadow: 0 0 0 3px rgba(102, 126, 234, 0.1);
        }

        .generate-btn {
            width: 100%;
            padding: 15px;
            background: linear-gradient(45deg, #667eea, #764ba2);
            color: white;
            border: none;
            border-radius: 12px;
            font-size: 1.2rem;
            font-weight: 600;
            cursor: pointer;
            transition: all 0.3s ease;
            margin-bottom: 30px;
        }

        .generate-btn:hover {
            transform: translateY(-2px);
            box-shadow: 0 10px 20px rgba(102, 126, 234, 0.3);
        }

        .generate-btn:disabled {
            opacity: 0.6;
            cursor: not-allowed;
            transform: none;
        }

        .story-output {
            background: #f7fafc;
            border: 2px solid #e2e8f0;
            border-radius: 12px;
            padding: 25px;
            min-height: 300px;
            font-size: 1.1rem;
            line-height: 1.8;
            color: #4a5568;
            white-space: pre-wrap;
            margin-bottom: 20px;
            display: none;
        }

        .story-output.show {
            display: block;
        }

        .loading {
            text-align: center;
            color: #667eea;
            font-style: italic;
            font-size: 1.1rem;
        }

        .copy-btn, .regenerate-btn {
            background: #48bb78;
            color: white;
            border: none;
            padding: 12px 20px;
            border-radius: 8px;
            cursor: pointer;
            font-weight: 600;
            transition: all 0.3s ease;
            margin-right: 10px;
            margin-bottom: 10px;
        }

        .regenerate-btn {
            background: #ed8936;
        }

        .copy-btn:hover {
            background: #38a169;
        }

        .regenerate-btn:hover {
            background: #dd6b20;
        }

        .example {
            background: #edf2f7;
            padding: 15px;
            border-radius: 8px;
            margin-bottom: 20px;
            font-size: 0.9rem;
            color: #4a5568;
        }

        .example strong {
            color: #667eea;
        }

        .thinking-display {
            background: #f0fff4;
            border: 1px solid #9ae6b4;
            border-radius: 8px;
            padding: 15px;
            margin-bottom: 15px;
            font-size: 0.9rem;
            color: #2d5016;
            display: none;
        }

        .thinking-display.show {
            display: block;
        }

        @media (max-width: 600px) {
            .row {
                flex-direction: column;
            }
            
            .container {
                padding: 20px;
            }
            
            .header h1 {
                font-size: 2rem;
            }
        }
    </style>
</head>
<body>
    <div class="container">
        <div class="header">
            <h1>üß† AI Story Generator</h1>
            <p>Create unique stories from ANY characters, themes, or ideas!</p>
        </div>

        <div class="setup-section" id="setupSection">
            <h3>‚öôÔ∏è FREE Demo Mode</h3>
            <p>Click below to start generating unlimited FREE stories with our AI storyteller!</p>
            <button id="demoBtn" onclick="enableDemoMode()" style="background: #805ad5; color: white; border: none; padding: 12px 24px; border-radius: 8px; cursor: pointer; font-size: 1.1rem;">üé¨ Start FREE Demo Mode</button>
        </div>

        <div class="example">
            <strong>Try ANY characters or themes:</strong><br>
            ‚Ä¢ "Magic elephant, boy named Dhruv, friendship"<br>
            ‚Ä¢ "Luna the dragon, magical forest, lost memories"<br>
            ‚Ä¢ "Robot named Zyx, underwater city, learning to cook"<br>
            ‚Ä¢ "Princess Aria, talking animals, saving the environment"<br>
            ‚Ä¢ "Space explorer cats, alien planet, teamwork"
        </div>

        <div class="input-group">
            <label for="hints">Story Elements (Characters, Setting, Theme):</label>
            <textarea 
                id="hints" 
                class="hints-input" 
                placeholder="Enter ANY characters, settings, themes, or problems...

Examples:
- Magic elephant, boy named Dhruv, friendship
- Brave little mouse named Pip, enchanted bakery, courage
- Twin robots, floating city, learning emotions  
- Magical paintbrush, artist girl, helping others
- Dancing elephant, circus, finding confidence"
            ></textarea>
        </div>



        <button id="generateBtn" class="generate-btn" onclick="generateStory()">üß† Generate Unique Story</button>

        <div id="thinkingDisplay" class="thinking-display">
            <strong>ü§î AI Thinking Process:</strong>
            <div id="thinkingContent"></div>
        </div>

        <div id="storyOutput" class="story-output"></div>

        <div id="actionButtons" style="display: none;">
            <button id="copyBtn" class="copy-btn" onclick="copyStory()">üìã Copy Story</button>
            <button id="regenerateBtn" class="regenerate-btn" onclick="regenerateStory()">üîÑ Generate New Story</button>
        </div>
    </div>

    <script>
        let currentApiKey = 'demo';
        let currentStory = '';

        // Enhanced AI Story Generation Engine
        class StoryAI {
            constructor() {
                this.settings = [
                    'peaceful village', 'enchanted forest', 'bustling city', 'magical kingdom', 
                    'quiet meadow', 'mysterious cave', 'floating island', 'cozy town', 
                    'hidden valley', 'ancient castle', 'underwater world', 'mountain peak'
                ];
                
                this.timeOfDay = ['morning', 'afternoon', 'evening', 'dawn', 'sunset', 'noon'];
                this.weather = ['sunny', 'rainy', 'cloudy', 'misty', 'starry', 'snowy'];
                this.emotions = ['excited', 'curious', 'happy', 'determined', 'hopeful', 'eager'];
            }

            generateStory(input) {
                // Parse input to extract elements
                const elements = this.parseInput(input);
                
                // Generate story components
                const setting = this.getRandomElement(this.settings);
                const time = this.getRandomElement(this.timeOfDay);
                const weather = this.getRandomElement(this.weather);
                const emotion = this.getRandomElement(this.emotions);
                
                const title = this.generateTitle(elements);
                const content = this.generateContent(elements, setting, time, weather, emotion);
                const storyId = Math.floor(Math.random() * 999999);
                
                return { title, content, id: storyId };
            }

            parseInput(input) {
                const parts = input.split(',').map(p => p.trim());
                return {
                    mainCharacter: this.cleanCharacterName(parts[0]),
                    secondaryElement: parts.length > 1 ? parts[1] : null,
                    theme: parts.length > 2 ? parts[2] : 'adventure'
                };
            }

            cleanCharacterName(name) {
                // Clean up and format character names properly
                if (!name) return 'the hero';
                
                // Handle specific cases
                if (name.toLowerCase().includes('magic elephant')) {
                    return 'Mango the Magic Elephant';
                }
                
                // Capitalize first letter of each word
                return name.split(' ').map(word => 
                    word.charAt(0).toUpperCase() + word.slice(1).toLowerCase()
                ).join(' ');
            }

            generateTitle(elements) {
                const titleTemplates = [
                    `${elements.mainCharacter} and the Great Adventure`,
                    `The Day ${elements.mainCharacter} Discovered ${elements.theme}`,
                    `${elements.mainCharacter}'s Amazing Journey`,
                    `How ${elements.mainCharacter} Learned About ${elements.theme}`,
                    `The Tale of ${elements.mainCharacter}`,
                    `${elements.mainCharacter} and the Power of ${elements.theme}`
                ];
                
                return this.getRandomElement(titleTemplates);
            }

            generateContent(elements, setting, time, weather, emotion) {
                // Generate a storytelling-friendly narrative
                const focus = this.getRandomElement(['adventure', 'friendship', 'learning', 'courage', 'creativity', 'responsibility']);
                
                const opening = this.generateOpening(elements.mainCharacter, setting, time, weather, emotion);
                const problem = this.generateProblem(elements, focus);
                const journey = this.generateJourney(elements, focus);
                const resolution = this.generateResolution(elements, focus);
                const ending = this.generateEnding(elements);
                
                return [opening, problem, journey, resolution, ending].join('\n\n');
            }

            generateOpening(character, setting, time, weather, emotion) {
                const openings = [
                    `Once upon a time, in a beautiful ${setting}, there lived ${character}. On this ${weather} ${time}, ${character} woke up feeling ${emotion} and ready for whatever adventures the day might bring.`,
                    
                    `It was a ${weather} ${time} in the ${setting} when ${character} started what would become an unforgettable day. Feeling ${emotion} and full of energy, they had no idea how special this day would be.`,
                    
                    `In the heart of the ${setting}, ${character} began their morning feeling particularly ${emotion}. The ${weather} ${time} seemed perfect for something wonderful to happen.`
                ];
                
                return this.getRandomElement(openings);
            }

            generateProblem(elements, focus) {
                const problems = [
                    `Soon, ${elements.mainCharacter} discovered that ${elements.secondaryElement || 'a friend'} needed help with something very important. This was a perfect opportunity to learn about ${elements.theme}.`,
                    
                    `That's when ${elements.mainCharacter} noticed something interesting. There was a situation involving ${elements.secondaryElement || 'the community'} that needed attention, and it was connected to ${elements.theme}.`,
                    
                    `Everything changed when ${elements.mainCharacter} realized they could help solve a problem related to ${elements.theme}. ${elements.secondaryElement || 'Someone special'} was counting on them.`
                ];
                
                return this.getRandomElement(problems);
            }

            generateJourney(elements, focus) {
                const focusActions = {
                    'adventure': 'embarked on an exciting quest',
                    'friendship': 'reached out to make new friends and ask for help',
                    'learning': 'studied hard and practiced new skills',
                    'responsibility': 'took charge and made a careful plan',
                    'creativity': 'used their imagination to think of creative solutions',
                    'courage': 'gathered their courage and faced the challenge bravely'
                };
                
                const action = focusActions[focus] || 'worked hard to solve the problem';
                
                const journeys = [
                    `${elements.mainCharacter} ${action}. Along the way, they met helpful friends and learned important lessons that would guide them to success.`,
                    
                    `With determination, ${elements.mainCharacter} ${action}. Each step of the journey taught them something new about ${elements.theme} and about themselves.`,
                    
                    `${elements.mainCharacter} knew what needed to be done and ${action}. The adventure was full of wonderful discoveries and moments of growth.`,

                    `Filled with hope, ${elements.mainCharacter} ${action}. They discovered that sometimes the most unexpected paths lead to the most beautiful destinations.`,

                    `${elements.mainCharacter} decided to ${action}. Through patience and perseverance, they found that even the biggest challenges could be overcome.`
                ];
                
                return this.getRandomElement(journeys);
            }

            generateResolution(elements, focus) {
                const resolutions = [
                    `Using everything they had learned about ${elements.theme}, ${elements.mainCharacter} found the perfect way to help. ${elements.secondaryElement || 'Everyone'} was amazed by their kindness and wisdom.`,
                    
                    `With a heart full of understanding, ${elements.mainCharacter} solved the problem in the most wonderful way. The power of ${elements.theme} made all the difference.`,
                    
                    `${elements.mainCharacter} discovered that ${elements.theme} was the key to making everything better. Their caring actions brought joy and hope to all who witnessed them.`,

                    `Through gentle persistence and clever thinking, ${elements.mainCharacter} found a solution that helped everyone. The lesson of ${elements.theme} shone brightly through their actions.`,

                    `${elements.mainCharacter} combined their natural talents with deep understanding of ${elements.theme}, creating a solution that was both beautiful and effective.`,

                    `In a moment of inspiration, ${elements.mainCharacter} realized that ${elements.theme} wasn't just an idea‚Äîit was a powerful force that could change everything for the better.`
                ];
                
                return this.getRandomElement(resolutions);
            }

            generateEnding(elements) {
                const endings = [
                    `From that day forward, ${elements.mainCharacter} became known throughout the land for their wisdom and kindness. They continued to help others and share the wonderful lessons they had learned, making the world a brighter place for everyone.`,
                    
                    `${elements.mainCharacter} returned home that evening with a heart full of joy and pride. They had discovered that the greatest adventures aren't just about exciting journeys‚Äîthey're about the love and friendship we share along the way.`,
                    
                    `The story of ${elements.mainCharacter} spread far and wide, inspiring others to believe in themselves and the power of ${elements.theme}. And whenever children heard this tale, they too felt brave enough to follow their own dreams.`,

                    `As the stars came out that night, ${elements.mainCharacter} smiled peacefully, knowing they had made a real difference. They fell asleep dreaming of tomorrow's adventures and all the good they could do in the world.`,

                    `${elements.mainCharacter} learned that every ending is really just a new beginning. With their newfound understanding of ${elements.theme}, they were ready for whatever wonderful adventures life would bring next.`,

                    `And so ${elements.mainCharacter} discovered that the most magical thing of all isn't magic spells or special powers‚Äîit's the love we share and the kindness we show to others. The end... or perhaps, the beginning of many more beautiful stories.`
                ];
                
                return this.getRandomElement(endings);
            }

            getRandomElement(array) {
                return array[Math.floor(Math.random() * array.length)];
            }
        }

        // Initialize AI
        const storyAI = new StoryAI();

        function enableDemoMode() {
            document.getElementById('setupSection').style.display = 'none';
            alert('üé¨ Demo mode activated! Generate unlimited FREE stories with any characters!');
        }

        async function generateStory() {
            const hints = document.getElementById('hints').value.trim();

            if (!hints) {
                alert('Please enter some story elements (characters, themes, settings)!');
                return;
            }

            if (!currentApiKey) {
                enableDemoMode();
            }

            const generateBtn = document.getElementById('generateBtn');
            const storyOutput = document.getElementById('storyOutput');
            const thinkingDisplay = document.getElementById('thinkingDisplay');
            const thinkingContent = document.getElementById('thinkingContent');
            
            generateBtn.disabled = true;
            generateBtn.textContent = 'üß† AI Creating Story...';
            storyOutput.classList.add('show');
            storyOutput.innerHTML = '<div class="loading">‚ú® AI is crafting your unique story...</div>';
            thinkingDisplay.classList.add('show');

            try {
                // Simulate AI thinking process
                thinkingContent.innerHTML = `üîç Analyzing input: "${hints}"...`;
                await new Promise(resolve => setTimeout(resolve, 1500));
                
                thinkingContent.innerHTML = 'üé≠ Creating characters and setting atmosphere...';
                await new Promise(resolve => setTimeout(resolve, 1200));
                
                thinkingContent.innerHTML = 'üìù Building engaging story for storytelling...';
                await new Promise(resolve => setTimeout(resolve, 1000));
                
                thinkingContent.innerHTML = 'üé® Adding vivid descriptions and natural flow...';
                await new Promise(resolve => setTimeout(resolve, 800));
                
                thinkingContent.innerHTML = '‚ú® Finalizing your storytelling masterpiece...';
                await new Promise(resolve => setTimeout(resolve, 500));
                
                // Generate the actual story
                const story = storyAI.generateStory(hints);
                displayStory(`# ${story.title}\n\n${story.content}\n\n*Story ID: ${story.id} - Perfect for storytelling!*`);
                
                thinkingDisplay.classList.remove('show');
            } catch (error) {
                storyOutput.innerHTML = `<div style="color: red;">Error: ${error.message}</div>`;
            }

            generateBtn.disabled = false;
            generateBtn.textContent = 'üß† Generate Unique Story';
        }

        function displayStory(story) {
            const storyOutput = document.getElementById('storyOutput');
            const actionButtons = document.getElementById('actionButtons');
            
            currentStory = story;
            storyOutput.innerHTML = story;
            actionButtons.style.display = 'block';
        }

        function copyStory() {
            navigator.clipboard.writeText(currentStory).then(() => {
                const copyBtn = document.getElementById('copyBtn');
                const originalText = copyBtn.textContent;
                copyBtn.textContent = '‚úÖ Copied!';
                setTimeout(() => {
                    copyBtn.textContent = originalText;
                }, 2000);
            }).catch(() => {
                alert('Unable to copy story. Please select and copy manually.');
            });
        }

        function regenerateStory() {
            generateStory();
        }
    </script>
</body>
</html>
